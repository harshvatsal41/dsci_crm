{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///Users/harshvatsal/Desktop/DSCI/CMS/DSCI_Events/dsci_crm/src/app/administration/login/page.js"],"sourcesContent":["\"use client\";\nimport { useState } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { login } from \"@/Redux/Reducer/authSlice\";\nimport { setLoading} from \"@/Redux/Reducer/menuSlice\";\n\n\nexport default function Login() {\n  const [formData, setFormData] = useState({ email: \"\", password: \"\" });\n  const [message, setMessage] = useState(null);\n  const dispatch = useDispatch();\n  const loading = useSelector((state) => state.menu?.loading ?? false);\n  const router = useRouter();\n\n  const handleLogin = async (e) => {\n    e.preventDefault();\n    setMessage(null);\n    dispatch(setLoading(true));\n    \n    const res = await fetch(\"/api/admin/auth/login\", {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify(formData)\n    });\n\n    const data = await res.json();\n    if (res.ok) {\n      document.cookie = `rsvAuthToken=${data.token}; path=/;`;\n      // document.cookie = `rsvDesignation=${data.role}`;\n      // Dispatch Redux action to store token\n      dispatch(login({ token: data.token, role: data.role, user: data.user }));\n\n      setMessage(\"Logged in successfully\");\n      router.push(\"/administration/dashboard\");\n      dispatch(setLoading(false)); \n    } else {\n      dispatch(setLoading(false)); \n      setMessage(data.error);\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen flex items-center justify-center bg-gray-50\">\n      <div className=\"bg-white p-8 rounded-lg shadow-lg w-full max-w-md\">\n        <h2 className=\"text-2xl font-bold text-center text-[#0A8270] mb-2\">\n          Sign In\n        </h2>\n        <p className=\"text-center text-gray-600 mb-6 text-sm\">\n          to continue with DSCI CRM\n        </p>\n        <form onSubmit={handleLogin}>\n          <div className=\"mb-4\">\n            <label className=\"block text-gray-700 mb-1\">Email</label>\n            <div className=\"flex items-center border rounded px-3 bg-white\">\n              <span className=\"text-gray-500 mr-2\">ðŸ“§</span>\n              <input\n                type=\"email\"\n                placeholder=\"Enter your email\"\n                className=\"w-full p-2 outline-none text-gray-700\"\n                value={formData.email}\n                onChange={(e) =>\n                  setFormData({ ...formData, email: e.target.value })\n                }\n                disabled={loading}\n              />\n            </div>\n          </div>\n          <div className=\"mb-4\">\n            <label className=\"block text-gray-700 mb-1\">Password</label>\n            <div className=\"flex items-center border rounded px-3 bg-white\">\n              <span className=\"text-gray-500 mr-2\">ðŸ”’</span>\n              <input\n                type=\"password\"\n                placeholder=\"Enter your password\"\n                className=\"w-full p-2 outline-none text-gray-700\"\n                value={formData.password}\n                onChange={(e) =>\n                  setFormData({ ...formData, password: e.target.value })\n                }\n                disabled={loading}\n              />\n            </div>\n          </div>\n          {message && (\n            <p className={`text-sm text-red-500`}>\n              {message}\n            </p>\n          )}\n          <button\n            type=\"submit\"\n            className={`w-full p-2 mt-2 rounded text-white ${loading ? 'bg-gray-400' : 'bg-[#0A8270] hover:bg-[#086d5f]'}`}\n            disabled={loading}\n          >\n            {loading ? 'Logging in...' : 'Log IN'}\n          </button>\n        </form>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}